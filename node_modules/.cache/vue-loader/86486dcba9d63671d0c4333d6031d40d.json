{"remainingRequest":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\src\\components\\employee\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\src\\components\\employee\\list.vue","mtime":1628249879484},{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRFbXBsb3llZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9lbXBsb3llZS9hZGQnKTsKICAgIH0sCiAgICBlZGl0RW1wbG95ZWUoaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9lbXBsb3llZS9lZGl0LycraWQpOwogICAgfSwKICAgIGFzeW5jIGRlbGV0ZUVtcGxveWVlKGlkLCBpbmRleCkgewogICAgICB2YXIgY29uZmlybSA9IGF3YWl0IHRoaXMuJGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB0byBkZWxldGU/Jyk7CiAgICAgIGlmKGNvbmZpcm0pIHsgCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZGVsZXRlKHRoaXMuJHN0b3JlLnN0YXRlLmFwaVVybCsnL2VtcGxveWVlcy9kZWxldGVfZW1wbG95ZWUvJytpZCwgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnKyB0aGlzLiRjb29raWVzLmdldCgnX3RfaHJtJykKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBpZihyZXNwb25zZS5oYXNPd25Qcm9wZXJ0eSgnZGF0YScpKSB7CiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuaGFzT3duUHJvcGVydHkoJ21lc3NhZ2UnKSAmJiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgIT0gJycpIHsKICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVyKHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMubGlzdCwgaW5kZXgpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICBjYXRjaChlcnJvcikgewogICAgICAgICAgdGhpcy4kZXJyb3JIYW5kbGluZyhlcnJvcik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZGlzcGxheURhdGUodmFsdWUpewogICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09ICIiKSByZXR1cm4gIiI7CiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodmFsdWUpOyAgICAgIAogICAgICB2YXIgZGQgPSBkYXRlLmdldERhdGUoKTsKICAgICAgdmFyIG1tID0gZGF0ZS5nZXRNb250aCgpICsgMTsKICAgICAgdmFyIHl5eXkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgIGlmIChkZCA8IDEwKSB7IGRkID0gJzAnICsgZGQ7IH0KICAgICAgaWYgKG1tIDwgMTApIHsgbW0gPSAnMCcgKyBtbTsgfQogICAgICByZXR1cm4geXl5eSsnLScrbW0rJy0nK2RkOwogICAgfQogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIHRyeSB7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmxvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQodGhpcy4kc3RvcmUuc3RhdGUuYXBpVXJsKycvZW1wbG95ZWVzJywgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJysgdGhpcy4kY29va2llcy5nZXQoJ190X2hybScpCiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYocmVzcG9uc2UuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSkgewogICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0KICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9hZGluZyA9IGZhbHNlOwogICAgfQogICAgY2F0Y2goZXJyb3IpIHsKICAgICAgdGhpcy4kZXJyb3JIYW5kbGluZyhlcnJvcik7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/components/employee","sourcesContent":["<template>\n  <div class=\"sm-page\">\n    <div class=\"sm-page-nav\">\n      <div class=\"row\">\n        <div class=\"col-6 px-2 my-auto\">\n          <p>Employee</p>\n        </div>\n        <div class=\"col-6 d-flex justify-content-end\">\n          <button class=\"btn\" @click=\"addEmployee()\">\n            <i class=\"fa fa-plus-circle\"></i>\n            <span>Add</span>\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=\"sm-page-body b-0\">\n      <div class=\"table-grid\">\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <td class=\"text-center\" style=\"width: 30px; min-width: 30px\">\n                #\n              </td>\n              <td style=\"min-width: 150px\">Name</td>\n              <td style=\"min-width: 150px\">Email</td>\n              <td style=\"min-width: 150px; width: 150px;\">Hire Date</td>\n              <td style=\"min-width: 150px: width: 150px;\">Role</td>\n              <td style=\"min-width: 100px: width: 100px;\"></td>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(item, index) in list\" :key=\"index\">\n              <td class=\"text-center\">{{ index + 1 }}</td>\n              <td>{{ item.fname+' '+item.lname }}</td>\n              <td>{{ item.email }}</td>\n              <td>{{ displayDate(item.hireDate) }}</td>\n              <td>{{ item.role }}</td>\n              <td class=\"text-right\">\n                <a href=\"javascript:void(0)\" class=\"px-2 text-success\" @click=\"editEmployee(item._id)\">Edit</a>\n                <span>|</span>                \n                <a href=\"javascript:void(0)\" class=\"px-2 text-danger\" @click=\"deleteEmployee(item._id, index)\">Delete</a>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      list: [],\n    }\n  },\n  methods: {\n    addEmployee() {\n      this.$router.push('/employee/add');\n    },\n    editEmployee(id) {\n      this.$router.push('/employee/edit/'+id);\n    },\n    async deleteEmployee(id, index) {\n      var confirm = await this.$confirm('Are you sure to delete?');\n      if(confirm) { \n        try {\n          this.$store.state.loading = true;\n          var response = await axios.delete(this.$store.state.apiUrl+'/employees/delete_employee/'+id, {\n            headers: {\n              Authorization: 'Bearer '+ this.$cookies.get('_t_hrm')\n            }\n          });\n          if(response.hasOwnProperty('data')) {\n            if(response.data.hasOwnProperty('message') && response.data.message != '') {\n              this.$toaster(response.data.message);\n            }\n            this.$delete(this.list, index);\n          }\n          this.$store.state.loading = false;\n        }\n        catch(error) {\n          this.$errorHandling(error);\n        }\n      }\n    },\n    displayDate(value){\n      if (!value || value == \"\") return \"\";\n      var date = new Date(value);      \n      var dd = date.getDate();\n      var mm = date.getMonth() + 1;\n      var yyyy = date.getFullYear();\n      if (dd < 10) { dd = '0' + dd; }\n      if (mm < 10) { mm = '0' + mm; }\n      return yyyy+'-'+mm+'-'+dd;\n    }\n  },\n  async created() {\n    try {\n      this.$store.state.loading = true;\n      var response = await axios.get(this.$store.state.apiUrl+'/employees', {\n        headers: {\n          Authorization: 'Bearer '+ this.$cookies.get('_t_hrm')\n        }\n      });\n      if(response.hasOwnProperty('data')) {\n        this.list = response.data;\n      }\n      this.$store.state.loading = false;\n    }\n    catch(error) {\n      this.$errorHandling(error);\n    }\n  }\n}\n</script>\n"]}]}