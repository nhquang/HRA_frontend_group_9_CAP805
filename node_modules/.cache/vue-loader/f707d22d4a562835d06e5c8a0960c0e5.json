{"remainingRequest":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\src\\components\\branch\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\src\\components\\branch\\list.vue","mtime":1628249879185},{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRCcmFuY2goKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvYnJhbmNoL2FkZCcpOwogICAgfSwKICAgIGVkaXRCcmFuY2goaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9icmFuY2gvZWRpdC8nK2lkKTsKICAgIH0sCiAgICBhc3luYyBkZWxldGVCcmFuY2goaWQsIGluZGV4KSB7CiAgICAgIHZhciBjb25maXJtID0gYXdhaXQgdGhpcy4kY29uZmlybSgnQXJlIHlvdSBzdXJlIHRvIGRlbGV0ZT8nKTsKICAgICAgaWYoY29uZmlybSkgeyAKICAgICAgICB0cnkgewogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9hZGluZyA9IHRydWU7CiAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5kZWxldGUodGhpcy4kc3RvcmUuc3RhdGUuYXBpVXJsKycvYnJhbmNoZXMvZGVsZXRlX2JyYW5jaC8nK2lkLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcrIHRoaXMuJGNvb2tpZXMuZ2V0KCdfdF9ocm0nKQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmKHJlc3BvbnNlLmhhc093blByb3BlcnR5KCdkYXRhJykpIHsKICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5oYXNPd25Qcm9wZXJ0eSgnbWVzc2FnZScpICYmIHJlc3BvbnNlLmRhdGEubWVzc2FnZSAhPSAnJykgewogICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZXIocmVzcG9uc2UuZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRkZWxldGUodGhpcy5saXN0LCBpbmRleCk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGNhdGNoKGVycm9yKSB7CiAgICAgICAgICB0aGlzLiRlcnJvckhhbmRsaW5nKGVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICB0cnkgewogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLmFwaVVybCsnL2JyYW5jaGVzJywgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJysgdGhpcy4kY29va2llcy5nZXQoJ190X2hybScpCiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYocmVzcG9uc2UuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSkgewogICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0KICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9hZGluZyA9IGZhbHNlOwogICAgfQogICAgY2F0Y2goZXJyb3IpIHsKICAgICAgdGhpcy4kZXJyb3JIYW5kbGluZyhlcnJvcik7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/components/branch","sourcesContent":["<template>\n  <div class=\"sm-page\">\n    <div class=\"sm-page-nav\">\n      <div class=\"row\">\n        <div class=\"col-6 px-2 my-auto\">\n          <p>Branch</p>\n        </div>\n        <div class=\"col-6 d-flex justify-content-end\">\n          <button class=\"btn\" @click=\"addBranch()\">\n            <i class=\"fa fa-plus-circle\"></i>\n            <span>Add</span>\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=\"sm-page-body b-0\">\n      <div class=\"table-grid\">\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <td class=\"text-center\" style=\"width: 30px; min-width: 30px\">\n                #\n              </td>\n              <td style=\"min-width: 150px\">Name</td>\n              <td style=\"min-width: 150px\">City</td>\n              <td style=\"min-width: 150px\">Province</td>\n              <td style=\"min-width: 150px\">Country</td>\n              <td style=\"min-width: 150px\">Description</td>\n              <td></td>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(item, index) in list\" :key=\"index\">\n              <td class=\"text-center\">{{ index + 1 }}</td>\n              <td>{{ item.name }}</td>\n              <td>{{ item.city }}</td>\n              <td>{{ item.province }}</td>\n              <td>{{ item.country }}</td>\n              <td>{{ item.description }}</td>\n              <td class=\"text-right\">\n                <a href=\"javascript:void(0)\" class=\"px-2 text-success\" @click=\"editBranch(item._id)\">Edit</a>\n                <span>|</span>                \n                <a href=\"javascript:void(0)\" class=\"px-2 text-danger\" @click=\"deleteBranch(item._id, index)\">Delete</a>\n              </td>\n            </tr>          \n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      list: [],\n    }\n  },\n  methods: {\n    addBranch() {\n      this.$router.push('/branch/add');\n    },\n    editBranch(id) {\n      this.$router.push('/branch/edit/'+id);\n    },\n    async deleteBranch(id, index) {\n      var confirm = await this.$confirm('Are you sure to delete?');\n      if(confirm) { \n        try {\n          this.$store.state.loading = true;\n          var response = await axios.delete(this.$store.state.apiUrl+'/branches/delete_branch/'+id, {\n            headers: {\n              Authorization: 'Bearer '+ this.$cookies.get('_t_hrm')\n            }\n          });\n          if(response.hasOwnProperty('data')) {\n            if(response.data.hasOwnProperty('message') && response.data.message != '') {\n              this.$toaster(response.data.message);\n            }\n            this.$delete(this.list, index);\n          }\n          this.$store.state.loading = false;\n        }\n        catch(error) {\n          this.$errorHandling(error);\n        }\n      }\n    }\n  },\n  async created() {\n    try {\n      this.$store.state.loading = true;\n      var response = await axios.get(this.$store.state.apiUrl+'/branches', {\n        headers: {\n          Authorization: 'Bearer '+ this.$cookies.get('_t_hrm')\n        }\n      });\n      if(response.hasOwnProperty('data')) {\n        this.list = response.data;\n      }\n      this.$store.state.loading = false;\n    }\n    catch(error) {\n      this.$errorHandling(error);\n    }\n  }\n}\n</script>\n\n"]}]}