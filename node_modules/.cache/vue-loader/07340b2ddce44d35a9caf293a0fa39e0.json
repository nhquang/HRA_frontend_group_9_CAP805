{"remainingRequest":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\src\\components\\department\\edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\src\\components\\department\\edit.vue","mtime":1628681336414},{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IGZvcm1WYWxpZGF0aW9uIH0gZnJvbSAnQC9oZWxwZXIvZm9ybV92YWxpZGF0aW9uJzsKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW2Zvcm1WYWxpZGF0aW9uXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnJhbmNoSWQ6JycsZGVzY3JpcHRpb246JycsbmFtZTonJyxhY3RpdmU6JycsCiAgICAgIG1hc3Rlcl9icmFuY2hlczogW10sICAgICAgCiAgICB9CiAgfSwKICB2YWxpZGF0b3JzOiB7CiAgICBuYW1lKHZhbHVlKSB7IHJldHVybiB0aGlzLnZhbGlkYXRvci52YWx1ZSh2YWx1ZSkucmVxdWlyZWQodGhpcy5yZXF1aXJlZCgnRGVwYXJ0bWVudCBOYW1lJykpOyB9LAogICAgZGVzY3JpcHRpb24odmFsdWUpIHsgcmV0dXJuIHRoaXMudmFsaWRhdG9yLnZhbHVlKHZhbHVlKS5yZXF1aXJlZCh0aGlzLnJlcXVpcmVkKCdEZXNjcmlwdGlvbicpKTsgfSwKICAgIGJyYW5jaElkKHZhbHVlKSB7IHJldHVybiB0aGlzLnZhbGlkYXRvci52YWx1ZSh2YWx1ZSkucmVxdWlyZWQodGhpcy5yZXF1aXJlZCgnQnJhbmNoJykpOyB9LAogIH0sCiAgbWV0aG9kczogewogICAgYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9kZXBhcnRtZW50Jyk7CiAgICB9LAogICAgYXN5bmMgZ2V0QnJhbmNoKCl7CiAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCh0aGlzLiRzdG9yZS5zdGF0ZS5hcGlVcmwrIi9icmFuY2hlcyIsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcrIHRoaXMuJGNvb2tpZXMuZ2V0KCdfdF9ocm0nKQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmKHJlc3BvbnNlLmhhc093blByb3BlcnR5KCdkYXRhJykpIHsKICAgICAgICB0aGlzLm1hc3Rlcl9icmFuY2hlcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0KICAgIH0sIAogICAgYXN5bmMgZWRpdCgpIHsKICAgICAgdGhpcy5yZXNldEZvcm1FcnJvcigpOwogICAgICB2YXIgY29uZmlybSA9IGF3YWl0IHRoaXMuJGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB0byB1cGRhdGU/Jyk7CiAgICAgIGlmKGNvbmZpcm0pIHsgCiAgICAgICAgdGhpcy4kdmFsaWRhdGUoKTsKICAgICAgICBpZih0aGlzLnZhbGlkYXRpb24uZXJyb3JzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgIG5hbWU6dGhpcy5uYW1lLGRlc2NyaXB0aW9uOnRoaXMuZGVzY3JpcHRpb24sYnJhbmNoSWQ6dGhpcy5icmFuY2hJZCxhY3RpdmU6dGhpcy5hY3RpdmUKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wdXQodGhpcy4kc3RvcmUuc3RhdGUuYXBpVXJsKycvZGVwYXJ0bWVudHMvJyt0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsIGRhdGEsIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcrIHRoaXMuJGNvb2tpZXMuZ2V0KCdfdF9ocm0nKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmhhc093blByb3BlcnR5KCdkYXRhJykpIHsKICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9kZXBhcnRtZW50Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGNhdGNoKGVycm9yKSB7CiAgICAgICAgICAgIHRoaXMuJGVycm9ySGFuZGxpbmcoZXJyb3IpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIHRoaXMudG9vbHRpcEVycm9yKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9IAogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGF3YWl0IHRoaXMuZ2V0QnJhbmNoKCk7CiAgICB0cnkgewogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLmFwaVVybCsnL2RlcGFydG1lbnRzLycrdGhpcy4kcm91dGUucGFyYW1zLmlkLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnKyB0aGlzLiRjb29raWVzLmdldCgnX3RfaHJtJykKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZihyZXNwb25zZS5oYXNPd25Qcm9wZXJ0eSgnZGF0YScpKSB7IAogICAgICAgIHRoaXMubmFtZSA9IHJlc3BvbnNlLmRhdGEubmFtZTsKICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gcmVzcG9uc2UuZGF0YS5kZXNjcmlwdGlvbjsKICAgICAgICB0aGlzLmJyYW5jaElkID0gcmVzcG9uc2UuZGF0YS5icmFuY2hJZDsKICAgICAgICB0aGlzLmFjdGl2ZSA9IHJlc3BvbnNlLmRhdGEuYWN0aXZlOwogICAgICB9CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0KICAgIGNhdGNoKGVycm9yKSB7CiAgICAgIHRoaXMuJGVycm9ySGFuZGxpbmcoZXJyb3IpOwogICAgfQogIH0KfQo="},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/components/department","sourcesContent":["<template>\n  <div class=\"sm-page\">\n    <div class=\"sm-page-nav\">\n      <div class=\"row\">\n        <div class=\"col-6 px-2 my-auto\">\n          <p>Edit Department</p>\n        </div>\n        <div class=\"col-6 d-flex justify-content-end\">\n          <button class=\"btn\" @click=\"back()\">\n            <i class=\"fa fa-chevron-left\"></i>\n            <span>Back</span>\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=\"sm-page-body\">     \n      <div class=\"col-lg-6 col-xl-4 col-md-6 col-sm-12 p-0\">\n        <div class=\"row sm-page-block\">\n          <div class=\"col-12 mb-2 px-2\">\n            <label class=\"req\">Department Name</label>\n            <input type=\"text\" id=\"name\" v-model=\"name\"/>\n          </div>\n          <div class=\"col-12 mb-2 px-2\">\n            <label class=\"req\">Branch</label>\n            <select v-model=\"branchId\" id=\"branchId\">\n                <option value=\"\">--Select--</option>\n                <option v-for=\"(item, index) in master_branches\" :key=\"index\" :value=\"item._id\">{{ item.name }}</option>\n            </select>      \n          </div>\n          <div class=\"col-12 mb-2 px-2\">\n            <label>Description</label>\n            <textarea cols=\"30\" rows=\"5\" id=\"description\" v-model=\"description\"></textarea>          \n          </div>\n          <div class=\"col-12 mb-2 px-2\">  \n              <div class=\"d-flex\">\n                <input type=\"checkbox\" id=\"active\" class=\"w-auto my-auto mr-2\" v-model=\"active\"/>                 \n                <label for=\"active\" class=\"my-auto\"> Active</label>            \n              </div>            \n            </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"sm-page-footer\">\n      <div class=\"row\">\n        <div class=\"col-12  my-auto\">                  \n          <button class=\"btn save-btn\" @click=\"edit()\">\n            <i class=\"fa fa-check\"></i>\n            <span>Update</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from 'axios';\nimport { formValidation } from '@/helper/form_validation';\nexport default {\n  mixins: [formValidation],\n  data() {\n    return {\n      branchId:'',description:'',name:'',active:'',\n      master_branches: [],      \n    }\n  },\n  validators: {\n    name(value) { return this.validator.value(value).required(this.required('Department Name')); },\n    description(value) { return this.validator.value(value).required(this.required('Description')); },\n    branchId(value) { return this.validator.value(value).required(this.required('Branch')); },\n  },\n  methods: {\n    back() {\n      this.$router.push('/department');\n    },\n    async getBranch(){\n      var response = await axios.get(this.$store.state.apiUrl+\"/branches\", {\n        headers: {\n          Authorization: 'Bearer '+ this.$cookies.get('_t_hrm')\n        }\n      });\n      if(response.hasOwnProperty('data')) {\n        this.master_branches = response.data;\n      }\n    }, \n    async edit() {\n      this.resetFormError();\n      var confirm = await this.$confirm('Are you sure to update?');\n      if(confirm) { \n        this.$validate();\n        if(this.validation.errors.length == 0) {\n          try {\n            this.$store.state.loading = true;\n            var data = {\n               name:this.name,description:this.description,branchId:this.branchId,active:this.active\n            }\n            var response = await axios.put(this.$store.state.apiUrl+'/departments/'+this.$route.params.id, data, {\n              headers: {\n                Authorization: 'Bearer '+ this.$cookies.get('_t_hrm')\n              }\n            });\n            if(response.hasOwnProperty('data')) {\n              this.$store.state.loading = false;\n              this.$router.push('/department');\n            }\n          }\n          catch(error) {\n            this.$errorHandling(error);\n          }\n        }\n        else {\n          this.tooltipError();\n        }\n      }\n    } \n  },\n  async created() {\n    await this.getBranch();\n    try {\n      this.$store.state.loading = true;\n      var response = await axios.get(this.$store.state.apiUrl+'/departments/'+this.$route.params.id, {\n        headers: {\n          Authorization: 'Bearer '+ this.$cookies.get('_t_hrm')\n        }\n      });\n      if(response.hasOwnProperty('data')) { \n        this.name = response.data.name;\n        this.description = response.data.description;\n        this.branchId = response.data.branchId;\n        this.active = response.data.active;\n      }\n      this.$store.state.loading = false;\n    }\n    catch(error) {\n      this.$errorHandling(error);\n    }\n  }\n}\n</script>\n"]}]}