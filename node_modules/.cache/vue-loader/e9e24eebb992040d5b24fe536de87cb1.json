{"remainingRequest":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\src\\components\\department\\add.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\src\\components\\department\\add.vue","mtime":1628681336376},{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IGZvcm1WYWxpZGF0aW9uIH0gZnJvbSAnQC9oZWxwZXIvZm9ybV92YWxpZGF0aW9uJzsKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW2Zvcm1WYWxpZGF0aW9uXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnJhbmNoSWQ6JycsZGVzY3JpcHRpb246JycsbmFtZTonJyxhY3RpdmU6JycsCiAgICAgIG1hc3Rlcl9icmFuY2hlczogW10sICAgICAgCiAgICB9CiAgfSwKICB2YWxpZGF0b3JzOiB7CiAgICBuYW1lKHZhbHVlKSB7IHJldHVybiB0aGlzLnZhbGlkYXRvci52YWx1ZSh2YWx1ZSkucmVxdWlyZWQodGhpcy5yZXF1aXJlZCgnRGVwYXJ0bWVudCBOYW1lJykpOyB9LAogICAgZGVzY3JpcHRpb24odmFsdWUpIHsgcmV0dXJuIHRoaXMudmFsaWRhdG9yLnZhbHVlKHZhbHVlKS5yZXF1aXJlZCh0aGlzLnJlcXVpcmVkKCdEZXNjcmlwdGlvbicpKTsgfSwKICAgIGJyYW5jaElkKHZhbHVlKSB7IHJldHVybiB0aGlzLnZhbGlkYXRvci52YWx1ZSh2YWx1ZSkucmVxdWlyZWQodGhpcy5yZXF1aXJlZCgnQnJhbmNoJykpOyB9LAogIH0sCiAgbWV0aG9kczogewogICAgYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9kZXBhcnRtZW50Jyk7CiAgICB9LAogICAgYXN5bmMgZ2V0QnJhbmNoKCl7CiAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCh0aGlzLiRzdG9yZS5zdGF0ZS5hcGlVcmwrIi9icmFuY2hlcyIsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcrIHRoaXMuJGNvb2tpZXMuZ2V0KCdfdF9ocm0nKQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmKHJlc3BvbnNlLmhhc093blByb3BlcnR5KCdkYXRhJykpIHsKICAgICAgICB0aGlzLm1hc3Rlcl9icmFuY2hlcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBzYXZlKCkgewogICAgICB0aGlzLnJlc2V0Rm9ybUVycm9yKCk7CiAgICAgIHZhciBjb25maXJtID0gYXdhaXQgdGhpcy4kY29uZmlybSgnQXJlIHlvdSBzdXJlIHRvIHNhdmU/Jyk7CiAgICAgIGlmKGNvbmZpcm0pIHsgCiAgICAgICAgdGhpcy4kdmFsaWRhdGUoKTsKICAgICAgICBpZih0aGlzLnZhbGlkYXRpb24uZXJyb3JzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgbmFtZTp0aGlzLm5hbWUsZGVzY3JpcHRpb246dGhpcy5kZXNjcmlwdGlvbixicmFuY2hJZDp0aGlzLmJyYW5jaElkLGFjdGl2ZTp0aGlzLmFjdGl2ZQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QodGhpcy4kc3RvcmUuc3RhdGUuYXBpVXJsKycvZGVwYXJ0bWVudHMnLCBkYXRhLCB7CiAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJysgdGhpcy4kY29va2llcy5nZXQoJ190X2hybScpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYocmVzcG9uc2UuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSkgeyAKICAgICAgICAgICAgICB0aGlzLmJyYW5jaElkPScnO3RoaXMuZGVzY3JpcHRpb249Jyc7dGhpcy5uYW1lPScnO3RoaXMuYWN0aXZlPScnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIGNhdGNoKGVycm9yKSB7CiAgICAgICAgICAgIHRoaXMuJGVycm9ySGFuZGxpbmcoZXJyb3IpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIHRoaXMudG9vbHRpcEVycm9yKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0QnJhbmNoKCk7CiAgfQp9Cg=="},{"version":3,"sources":["add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add.vue","sourceRoot":"src/components/department","sourcesContent":["<template>\n  <div class=\"sm-page\">\n    <div class=\"sm-page-nav\">\n      <div class=\"row\">\n        <div class=\"col-6 px-2 my-auto\">\n          <p>Add Department</p>\n        </div>\n        <div class=\"col-6 d-flex justify-content-end\">\n          <button class=\"btn\" @click=\"back()\">\n            <i class=\"fa fa-chevron-left\"></i>\n            <span>Back</span>\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=\"sm-page-body\">     \n      <div class=\"col-lg-6 col-xl-4 col-md-6 col-sm-12 p-0\">\n        <div class=\"row sm-page-block\">\n          <div class=\"col-12 mb-2 px-2\">\n            <label class=\"req\">Department Name</label>\n            <input type=\"text\" id=\"name\" v-model=\"name\"/>\n          </div>\n          <div class=\"col-12 mb-2 px-2\">\n            <label class=\"req\">Branch</label>\n            <select v-model=\"branchId\" id=\"branchId\">\n                <option value=\"\">--Select--</option>\n                <option v-for=\"(item, index) in master_branches\" :key=\"index\" :value=\"item._id\">{{ item.name }}</option>\n            </select>      \n          </div>\n          <div class=\"col-12 mb-2 px-2\">\n            <label>Description</label>\n            <textarea cols=\"30\" rows=\"5\" id=\"description\" v-model=\"description\"></textarea>          \n          </div>\n          <div class=\"col-12 mb-2 px-2\">  \n              <div class=\"d-flex\">\n                <input type=\"checkbox\" id=\"active\" class=\"w-auto my-auto mr-2\" v-model=\"active\"/>                 \n                <label for=\"active\" class=\"my-auto\"> Active</label>            \n              </div>            \n            </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"sm-page-footer\">\n      <div class=\"row\">\n        <div class=\"col-12  my-auto\">                  \n          <button class=\"btn save-btn\" @click=\"save()\">\n            <i class=\"fa fa-check\"></i>\n            <span>Save</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from 'axios';\nimport { formValidation } from '@/helper/form_validation';\nexport default {\n  mixins: [formValidation],\n  data() {\n    return {\n      branchId:'',description:'',name:'',active:'',\n      master_branches: [],      \n    }\n  },\n  validators: {\n    name(value) { return this.validator.value(value).required(this.required('Department Name')); },\n    description(value) { return this.validator.value(value).required(this.required('Description')); },\n    branchId(value) { return this.validator.value(value).required(this.required('Branch')); },\n  },\n  methods: {\n    back() {\n      this.$router.push('/department');\n    },\n    async getBranch(){\n      var response = await axios.get(this.$store.state.apiUrl+\"/branches\", {\n        headers: {\n          Authorization: 'Bearer '+ this.$cookies.get('_t_hrm')\n        }\n      });\n      if(response.hasOwnProperty('data')) {\n        this.master_branches = response.data;\n      }\n    },\n    async save() {\n      this.resetFormError();\n      var confirm = await this.$confirm('Are you sure to save?');\n      if(confirm) { \n        this.$validate();\n        if(this.validation.errors.length == 0) {\n          try {\n            this.$store.state.loading = true;\n            var data = {\n              name:this.name,description:this.description,branchId:this.branchId,active:this.active\n            }\n            var response = await axios.post(this.$store.state.apiUrl+'/departments', data, {\n               headers: {\n                Authorization: 'Bearer '+ this.$cookies.get('_t_hrm')\n              }\n            });\n            if(response.hasOwnProperty('data')) { \n              this.branchId='';this.description='';this.name='';this.active='';\n            }\n            this.$store.state.loading = false;\n          }\n          catch(error) {\n            this.$errorHandling(error);\n          }\n        }\n        else {\n          this.tooltipError();\n        }\n      }\n    },\n  },\n  async created() {\n    this.getBranch();\n  }\n}\n</script>\n"]}]}