{"remainingRequest":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\src\\components\\branch\\edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\src\\components\\branch\\edit.vue","mtime":1628681336305},{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Akash\\Desktop\\College\\2nd Semester\\CAP 805 Capstone Project\\HRA_frontend_group_9_CAP805\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IGZvcm1WYWxpZGF0aW9uIH0gZnJvbSAnQC9oZWxwZXIvZm9ybV92YWxpZGF0aW9uJzsKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW2Zvcm1WYWxpZGF0aW9uXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogJycsIHN0cmVldEFkZHJlc3M6ICcnLCBjaXR5OiAnJywgcHJvdmluY2U6ICcnLCBjb3VudHJ5OiAnJywgZGVzY3JpcHRpb246ICcnLAogICAgfQogIH0sCiAgdmFsaWRhdG9yczogewogICAgbmFtZSh2YWx1ZSkgeyByZXR1cm4gdGhpcy52YWxpZGF0b3IudmFsdWUodmFsdWUpLnJlcXVpcmVkKHRoaXMucmVxdWlyZWQoJ05hbWUnKSk7IH0sCiAgICBzdHJlZXRBZGRyZXNzKHZhbHVlKSB7IHJldHVybiB0aGlzLnZhbGlkYXRvci52YWx1ZSh2YWx1ZSkucmVxdWlyZWQodGhpcy5yZXF1aXJlZCgnU3RyZWV0IEFkZHJlc3MnKSk7IH0sCiAgICBjaXR5KHZhbHVlKSB7IHJldHVybiB0aGlzLnZhbGlkYXRvci52YWx1ZSh2YWx1ZSkucmVxdWlyZWQodGhpcy5yZXF1aXJlZCgnQ2l0eScpKTsgfSwKICAgIHByb3ZpbmNlKHZhbHVlKSB7IHJldHVybiB0aGlzLnZhbGlkYXRvci52YWx1ZSh2YWx1ZSkucmVxdWlyZWQodGhpcy5yZXF1aXJlZCgnUHJvdmluY2UnKSk7IH0sCiAgICBjb3VudHJ5KHZhbHVlKSB7IHJldHVybiB0aGlzLnZhbGlkYXRvci52YWx1ZSh2YWx1ZSkucmVxdWlyZWQodGhpcy5yZXF1aXJlZCgnQ291bnRyeScpKTsgfSwKICB9LCAKICBtZXRob2RzOiB7CiAgICBiYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2JyYW5jaCcpOwogICAgfSwKICAgIGFzeW5jIGVkaXQoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtRXJyb3IoKTsKICAgICAgdmFyIGNvbmZpcm0gPSBhd2FpdCB0aGlzLiRjb25maXJtKCdBcmUgeW91IHN1cmUgdG8gdXBkYXRlPycpOwogICAgICBpZihjb25maXJtKSB7IAogICAgICAgIHRoaXMuJHZhbGlkYXRlKCk7CiAgICAgICAgaWYodGhpcy52YWxpZGF0aW9uLmVycm9ycy5sZW5ndGggPT0gMCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSwgc3RyZWV0QWRkcmVzczogdGhpcy5zdHJlZXRBZGRyZXNzLCBjaXR5OiB0aGlzLmNpdHksIHByb3ZpbmNlOiB0aGlzLnByb3ZpbmNlLCBjb3VudHJ5OiB0aGlzLmNvdW50cnksIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLAogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnB1dCh0aGlzLiRzdG9yZS5zdGF0ZS5hcGlVcmwrJy9icmFuY2hlcy91cGRhdGVfYnJhbmNoLycrdGhpcy4kcm91dGUucGFyYW1zLmlkLCBkYXRhLCB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnKyB0aGlzLiRjb29raWVzLmdldCgnX3RfaHJtJykKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZihyZXNwb25zZS5oYXNPd25Qcm9wZXJ0eSgnZGF0YScpKSB7CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvYnJhbmNoJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGNhdGNoKGVycm9yKSB7CiAgICAgICAgICAgIHRoaXMuJGVycm9ySGFuZGxpbmcoZXJyb3IpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIHRoaXMudG9vbHRpcEVycm9yKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBhc3luYyBjcmVhdGVkKCkgewogICAgdHJ5IHsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9hZGluZyA9IHRydWU7CiAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCh0aGlzLiRzdG9yZS5zdGF0ZS5hcGlVcmwrJy9icmFuY2hlcy8nK3RoaXMuJHJvdXRlLnBhcmFtcy5pZCwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJysgdGhpcy4kY29va2llcy5nZXQoJ190X2hybScpCiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYocmVzcG9uc2UuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSkgeyAKICAgICAgICB0aGlzLm5hbWUgPSByZXNwb25zZS5kYXRhLm5hbWU7CiAgICAgICAgdGhpcy5zdHJlZXRBZGRyZXNzID0gcmVzcG9uc2UuZGF0YS5zdHJlZXRBZGRyZXNzOwogICAgICAgIHRoaXMuY2l0eSA9IHJlc3BvbnNlLmRhdGEuY2l0eTsKICAgICAgICB0aGlzLnByb3ZpbmNlID0gcmVzcG9uc2UuZGF0YS5wcm92aW5jZTsKICAgICAgICB0aGlzLmNvdW50cnkgPSByZXNwb25zZS5kYXRhLmNvdW50cnk7CiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHJlc3BvbnNlLmRhdGEuZGVzY3JpcHRpb247CiAgICAgIH0KICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9hZGluZyA9IGZhbHNlOwogICAgfQogICAgY2F0Y2goZXJyb3IpIHsKICAgICAgdGhpcy4kZXJyb3JIYW5kbGluZyhlcnJvcik7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/components/branch","sourcesContent":["<template>\n  <div class=\"sm-page\">\n    <div class=\"sm-page-nav\">\n      <div class=\"row\">\n        <div class=\"col-6 px-2 my-auto\">\n          <p>Edit Branch</p>\n        </div>\n        <div class=\"col-6 d-flex justify-content-end\">\n          <button class=\"btn\" @click=\"back()\">\n            <i class=\"fa fa-chevron-left\"></i>\n            <span>Back</span>\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=\"sm-page-body\">     \n      <div class=\"col-lg-6 col-xl-4 col-md-6 col-sm-12 p-0\">\n        <div class=\"row sm-page-block\">\n           <div class=\"col-12 mb-2 px-2\">\n            <label class=\"req\">Branch Name</label>\n            <input type=\"text\" id=\"name\" v-model=\"name\"/>\n          </div>   \n          <div class=\"col-12 mb-2 px-2\">\n            <label class=\"req\">Street Address</label>\n            <textarea  cols=\"30\" rows=\"2\" id=\"streetAddress\" v-model=\"streetAddress\"></textarea>          \n          </div>       \n          <div class=\"col-12 mb-2 px-2\">\n            <label class=\"req\">City</label>\n            <input type=\"text\" id=\"city\" v-model=\"city\"/>\n          </div>\n          <div class=\"col-12 mb-2 px-2\">\n            <label class=\"req\">Province</label>\n            <input type=\"text\" id=\"province\" v-model=\"province\"/>\n          </div>\n          <div class=\"col-12 mb-2 px-2\">\n            <label class=\"req\">Country</label>\n            <input type=\"text\" id=\"country\" v-model=\"country\"/>\n          </div>\n          <div class=\"col-12 mb-2 px-2\">\n            <label>Description</label>\n            <textarea  cols=\"30\" rows=\"5\" id=\"description\" v-model=\"description\"></textarea>          \n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"sm-page-footer\">\n      <div class=\"row\">\n        <div class=\"col-12  my-auto\">                  \n          <button class=\"btn save-btn\" @click=\"edit()\">\n            <i class=\"fa fa-check\"></i>\n            <span>Update</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from 'axios';\nimport { formValidation } from '@/helper/form_validation';\nexport default {\n  mixins: [formValidation],\n  data() {\n    return {\n      name: '', streetAddress: '', city: '', province: '', country: '', description: '',\n    }\n  },\n  validators: {\n    name(value) { return this.validator.value(value).required(this.required('Name')); },\n    streetAddress(value) { return this.validator.value(value).required(this.required('Street Address')); },\n    city(value) { return this.validator.value(value).required(this.required('City')); },\n    province(value) { return this.validator.value(value).required(this.required('Province')); },\n    country(value) { return this.validator.value(value).required(this.required('Country')); },\n  }, \n  methods: {\n    back() {\n      this.$router.push('/branch');\n    },\n    async edit() {\n      this.resetFormError();\n      var confirm = await this.$confirm('Are you sure to update?');\n      if(confirm) { \n        this.$validate();\n        if(this.validation.errors.length == 0) {\n          try {\n            this.$store.state.loading = true;\n            var data = {\n              name: this.name, streetAddress: this.streetAddress, city: this.city, province: this.province, country: this.country, description: this.description,\n            }\n            var response = await axios.put(this.$store.state.apiUrl+'/branches/update_branch/'+this.$route.params.id, data, {\n              headers: {\n                Authorization: 'Bearer '+ this.$cookies.get('_t_hrm')\n              }\n            });\n            if(response.hasOwnProperty('data')) {\n              this.$store.state.loading = false;\n              this.$router.push('/branch');\n            }\n          }\n          catch(error) {\n            this.$errorHandling(error);\n          }\n        }\n        else {\n          this.tooltipError();\n        }\n      }\n    }\n  },\n  async created() {\n    try {\n      this.$store.state.loading = true;\n      var response = await axios.get(this.$store.state.apiUrl+'/branches/'+this.$route.params.id, {\n        headers: {\n          Authorization: 'Bearer '+ this.$cookies.get('_t_hrm')\n        }\n      });\n      if(response.hasOwnProperty('data')) { \n        this.name = response.data.name;\n        this.streetAddress = response.data.streetAddress;\n        this.city = response.data.city;\n        this.province = response.data.province;\n        this.country = response.data.country;\n        this.description = response.data.description;\n      }\n      this.$store.state.loading = false;\n    }\n    catch(error) {\n      this.$errorHandling(error);\n    }\n  }\n}\n</script>\n"]}]}